{%- assign path = include.path | remove: ".mp4" | remove: ".webm" -%}

<figure>
  <video width="{% if include.width %}{{ include.width }}{% else %}640{% endif %}" height="{% if include.height %}{{ include.height }}{% else %}360{% endif %}" controls {% if include.class %}class="{{ include.class }}"{% endif %}>
    <source src="{{ path | relative_url }}.mp4" type="video/mp4">
    <source src="{{ path | relative_url }}.webm" type="video/webm">
    Your browser does not support the video tag.
  </video>

  {%- if include.caption -%}
    <figcaption class="caption">{{ include.caption }}</figcaption>
  {%- endif -%}
</figure>
